{
  "primitive_number": 154,
  "selector": "ifTrue:",
  "description": "Execute block if receiver is true",
  "receiver": {
    "type": "True",
    "description": "Must be exactly the true object"
  },
  "arguments": [
    {
      "name": "block",
      "type": "BlockContext",
      "description": "Block to execute if receiver is true"
    }
  ],
  "returns": {
    "type": "Any",
    "description": "Result of evaluating the block"
  },
  "stack_effect": {
    "before": ["...", "receiver:True", "block:BlockContext"],
    "after": ["...", "result:Any"],
    "pops": 2,
    "pushes": 1
  },
  "operation": {
    "pseudocode": "result = block.value()",
    "steps": [
      "Pop block from stack",
      "Pop receiver from stack",
      "Verify receiver is exactly true",
      "Verify block is BlockContext",
      "Execute block",
      "Push block's result onto stack"
    ]
  },
  "preconditions": [
    "receiver === true (identity check)",
    "block is BlockContext",
    "block expects 0 arguments"
  ],
  "postconditions": [
    "result == block.value()",
    "stack depth decreased by 1",
    "block has been executed"
  ],
  "failures": [
    {
      "condition": "receiver is not true",
      "error": "TypeError",
      "message": "Receiver must be true"
    },
    {
      "condition": "block is not BlockContext",
      "error": "TypeError",
      "message": "Argument must be Block"
    },
    {
      "condition": "block expects arguments",
      "error": "ArgumentError",
      "message": "Block argument count mismatch"
    }
  ],
  "test_cases": [
    {
      "name": "execute_block",
      "receiver": true,
      "arguments": ["[42]"],
      "expected": 42,
      "explanation": "Block is executed and returns 42"
    },
    {
      "name": "block_with_expression",
      "receiver": true,
      "arguments": ["[3 + 4]"],
      "expected": 7,
      "explanation": "Block evaluates expression"
    },
    {
      "name": "block_returns_nil",
      "receiver": true,
      "arguments": ["[nil]"],
      "expected": null,
      "explanation": "Block can return nil"
    }
  ],
  "error_test_cases": [
    {
      "name": "false_receiver",
      "receiver": false,
      "arguments": ["[42]"],
      "expected_error": "TypeError",
      "explanation": "Only true can receive ifTrue:"
    },
    {
      "name": "non_boolean_receiver",
      "receiver": 1,
      "arguments": ["[42]"],
      "expected_error": "TypeError"
    },
    {
      "name": "non_block_argument",
      "receiver": true,
      "arguments": [42],
      "expected_error": "TypeError"
    }
  ],
  "examples": [
    {
      "smalltalk": "true ifTrue: [42]",
      "result": "42",
      "explanation": "Block is executed because receiver is true"
    },
    {
      "smalltalk": "true ifTrue: [Transcript show: 'yes']",
      "result": "nil",
      "explanation": "Block with side effects is executed"
    }
  ],
  "notes": [
    "Receiver must be exactly true (not truthy)",
    "Block is always evaluated",
    "Returns block's result",
    "Short-circuit evaluation pattern",
    "Enables conditional execution without special syntax"
  ],
  "related_primitives": [155, 156, 157, 158, 159],
  "complexity": "O(1) + O(block execution)",
  "side_effects": "Executes block (may have side effects)"
}